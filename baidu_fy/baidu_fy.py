import execjs
import requests
with open('baiodu_fy.js', encoding='utf-8') as f:
    js_code = f.read()
node = execjs.get()
#编译js代码
ctx = node.compile(js_code) #compile方法去加载js代码，参数cwd指定本地安装模块所在目录

search = '你好呀'
data1 = ctx.eval('data("'+search+'")')  #eval方法中，整个函数调用包含在字符串内
data1['query'] = search
headers = {
    'Host':'fanyi.baidu.com',
    'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36',
    'X-Requested-With':'XMLHttpRequest',
    'Origin': 'https://fanyi.baidu.com',
    'Referer': 'https://fanyi.baidu.com/translate?aldtype=16047&query=%E4%BD%A0%E5%A5%BD&keyfrom=baidu&smartresult=dict&lang=auto2zh',
    'Cookie':'PSTM=1625158021; BAIDUID=226BB1684C9766B09993FCD1A713C35C:FG=1; BIDUPSID=6FE83BD85D2A96B001DAA1FD295A1AA5; __yjs_duid=1_2253a89fdac985131d9133c4a173b2d81625489822668; REALTIME_TRANS_SWITCH=1; FANYI_WORD_SWITCH=1; HISTORY_SWITCH=1; SOUND_SPD_SWITCH=1; SOUND_PREFER_SWITCH=1; BDUSS_BFESS=FpQOEQ3a1dyRXhvY2M2SXlqb21nTUUtUjJ4eVFoeUdoUzZCWjE3V2l5UGVMWVZoRUFBQUFBJCQAAAAAAAAAAAEAAAAGNGeutPPAx7m32K8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN6gXWHeoF1he; BDSFRCVID=DdAOJeC62lQ-nZ3HcqLwesrXsg0IRInTH6aoO5DD4o1we3OU9p85EG0PKx8g0Kubz7pbogKKLmOTHp-F_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF=JJ4eoIKbfIvbfP0k5PoEb-F_hmT22-us0-jR2hcHMPoosIJXXKcCybFqXlO-bbj8LIjiaKJjBMbUotoH2RbEhl5yQh3ianQp52jb_h5TtUJMbb3dLnoMqfAnMMTyKMniBIj9-pnMHlQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuj605D5QyeaRabK6aKC5bL6rJabC3hI3JXU6q2bDeQN3kWIrNWT5B2T6H--oBVb6oyT3JXp0vWq54WbbvLT7johRTWqR4ep6gjUonDh83eMJ33bQJHmJ7BnrO5hvv8b6O3M72qfKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ58qJbIJ_DDQ5RbhKCKl-nOoq4tehHRx3R39WDTm_DonBtONoJcSK6OvW-LyKR7kK6OALe5X-pPKKRABVR3XLtPbXTkFyH525M5Q3mkjbUODfn02OP5PetorDt4syPRr2xRnWT4LKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJDJCFabKtCjTAKDTPyMMrL2K60aR3Hbx7vWJ5TMCoz2q7ObP4nQPvzJ-Qe-j5-0-5TX-TKShPC-qjM3q0Z3MCDBnoN025Gon0h3l02VMQEe-t2ynLV34QB0PRMW23rWl7mWPtVsxA45J7cM4IseboJLfT-0bc4KKJxbnLWeIJIjjCKjj3QjHD8JTn-5TIX_CjJbnA_Hn7zeUOfLf4pbt-qJt7IHCozohnJ-lRbetO4WbbJDMFwyfTnBT5Ka28tKp-2aKjbeDOO3jr2e5LkQN3TBbkO5bRiLRoLJ-JDDn3oyUvVXp0nK2cly5jtMgOBBJ0yQ4b4OR5JjxonDh83bG7MJPKtfD7H3KChtI0hbf5; BDSFRCVID_BFESS=DdAOJeC62lQ-nZ3HcqLwesrXsg0IRInTH6aoO5DD4o1we3OU9p85EG0PKx8g0Kubz7pbogKKLmOTHp-F_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF_BFESS=JJ4eoIKbfIvbfP0k5PoEb-F_hmT22-us0-jR2hcHMPoosIJXXKcCybFqXlO-bbj8LIjiaKJjBMbUotoH2RbEhl5yQh3ianQp52jb_h5TtUJMbb3dLnoMqfAnMMTyKMniBIj9-pnMHlQrh459XP68bTkA5bjZKxtq3mkjbPbDfn028DKuj605D5QyeaRabK6aKC5bL6rJabC3hI3JXU6q2bDeQN3kWIrNWT5B2T6H--oBVb6oyT3JXp0vWq54WbbvLT7johRTWqR4ep6gjUonDh83eMJ33bQJHmJ7BnrO5hvv8b6O3M72qfKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ58qJbIJ_DDQ5RbhKCKl-nOoq4tehHRx3R39WDTm_DonBtONoJcSK6OvW-LyKR7kK6OALe5X-pPKKRABVR3XLtPbXTkFyH525M5Q3mkjbUODfn02OP5PetorDt4syPRr2xRnWT4LKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJDJCFabKtCjTAKDTPyMMrL2K60aR3Hbx7vWJ5TMCoz2q7ObP4nQPvzJ-Qe-j5-0-5TX-TKShPC-qjM3q0Z3MCDBnoN025Gon0h3l02VMQEe-t2ynLV34QB0PRMW23rWl7mWPtVsxA45J7cM4IseboJLfT-0bc4KKJxbnLWeIJIjjCKjj3QjHD8JTn-5TIX_CjJbnA_Hn7zeUOfLf4pbt-qJt7IHCozohnJ-lRbetO4WbbJDMFwyfTnBT5Ka28tKp-2aKjbeDOO3jr2e5LkQN3TBbkO5bRiLRoLJ-JDDn3oyUvVXp0nK2cly5jtMgOBBJ0yQ4b4OR5JjxonDh83bG7MJPKtfD7H3KChtI0hbf5; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; ZD_ENTRY=empty; delPer=0; PSINO=7; Hm_lvt_64ecd82404c51e03dc91cb9e8c025574=1641620515; Hm_lpvt_64ecd82404c51e03dc91cb9e8c025574=1641620515; APPGUIDE_10_0_2=1; __yjs_st=2_MzM3MTQ0NGJlZjViZGNmMjhhMTY0NjhkNTg0YWFlY2M3OTJjNGUyZjAwZWFjOGY1MTIwNWI0MzcwOGIzMzZkMGFmOWQxYmRlOWY2NTYyOGY3YTJkMGEwM2YxNTM2ZDFiOTBkY2YzZWNiYTE1NDU1ZGJjZWY5NmY1NWJjZDVmN2IwZmNlNzRlMmNkY2I0Yjg0MmU2ZjAwZTc0MTU5MzExYzM1ZjBiNGNjZGMxM2RhYmZhNjhjNTczY2UxOTEyOTQ3M2E4ZWNiZTNlNGNiNTQzZDM3Zjc3MDdlYmI2OWY5MWFiN2IwMmUxZmZiZjUwMGEzMTQ2NWFkNTI0MzY2OWZlYV83XzllMzRhMjg0; ab_sr=1.0.1_ZTA0MmUwOTlkM2ZhY2JmZTdhM2JmM2UwMDVlZWJmZmJjMGE5NTUxNjVmMTk1ZjFjMDUwM2FhNjM2N2I2NmUwY2FiN2QzNGI2NzRjOTkyMDRhZGVjYTA5MDRmZTc0OTA4YmIyODAzODZlNWYyNjAwMWJiNmRhOGU2YjNiZGQ4YWVjZWFhNzMyNmQ3OTIzYzBlZWFhNGY5NzVhZTI1MWZlZTc5MjIwZGYzNTQ1MGNlMDY2YzAwNzc4MmNkNWRlYTFk; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; H_PS_PSSID=35106_31254_35489_35604_35456_34584_35490_35700_34813_35664_35321_26350_22158; BA_HECTOR=8h04850ha501a0aksf1gtid4j0r',
}
r = requests.post("https://fanyi.baidu.com/v2transapi?from=zh&to=en",data=data1,headers=headers)
print(r.text)

